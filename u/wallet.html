<!DOCTYPE html>
<html lang="en">
<head>
    <script src="../head.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="../script.js" defer></script>
    <script src="wallet.js" defer></script>
    <title>Wallet - CompNUS</title>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="profile.css" />
</head>
<body>
    <script>
        initHeader("Wallet");
    </script>

    <div class="mainscroll mainwallet">
        <div class="flex cc">
            <button onclick="loadWallet()">Refresh Wallet</button>
        </div>

        <br />

        <div class="walletgridline">
            <img src="../site/image/logo/currency.svg" class="currencylogo" />
            <h1>$NUS</h1>
            <h2 class="currencydisplay" id="walletnus">Loading...</h2>

            <div class="bottomacts">
                <button>Coin Info</button>
                <button>Convert into Nocas</button>
                <button onclick="location.assign('../crypto/nus/dividends.html')">Get Dividends</button>
                <button onclick="location.assign('../crypto/nus/')">$NUS Mining</button>
            </div>
        </div>
        <div class="walletgridline">
            <img src="../site/image/logo/noca.svg" class="currencylogo" />
            <h1>Nocas</h1>
            <h2 class="currencydisplay" id="walletnoca">Loading...</h2>

            <div class="bottomacts">
                <button>What are Nocas?</button>
                <button onclick="location.assign('../crypto/nus/free')">Free Nocas</button>
            </div>
        </div>
        <div class="walletgridline">
            <img src="../site/image/logo/sats.svg" class="currencylogo" />
            <h1>Bitcoin Satoshi</h1>
            <h2 class="currencydisplay" id="walletsats">Loading...</h2>

            <div class="bottomacts flex cc" style="justify-content: flex-end">
                <p>= <span id="bitcoinss">0.00000000</span> BTC &asymp; $<span id="bitcoinpr">0.000</span></p>
                <p id="corr" onclick="popup('What is this?','Approximate value of your Bitcoin Satoshi based on the current price of Bitcoin (provided by CoinDesk).')">?</p>
            </div>

            <div class="bottomacts">
                <button>Coin Info</button>
                <button>Convert into Nocas</button>
                <button onclick="location.assign('../crypto/nus/dividends.html')">Get Dividends</button>
                <button>Withdraw</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", async () => {
            const { data, error } = await supabase.auth.getUser();

            if (!data.user) {
                //window.location.href = "/u/login.html";
                return;
            } else if (error) {
                console.error(error);
                return;
            }

            loadWallet();
        });

        initFooter();
    </script>
</body>
</html>