<!DOCTYPE html>
<html>
<head>
    <script src="../head.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script src="../script.js"></script>
    <link rel="stylesheet" href="../style.css" />
    <link rel="stylesheet" href="credentials.css" />
    <title>Verify E-mail - CompNUS</title>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZW8SQ3EQ1B"></script><script>window.dataLayer = window.dataLayer || [];  function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-ZW8SQ3EQ1B');</script></head>
<body>
    <script>
        initHeader("E-mail Verification");
        document.querySelector("header").removeChild(document.getElementById("headernav"));
        document.addEventListener("DOMContentLoaded", async () => {
            var verified = await handlePostVerification();
            var title = document.getElementById("verif");
            var msg = document.getElementById("verifmsg");
            if (verified === true) {
                title.innerHTML = "Verified succesfully!";
                msg.innerHTML = "Please wait while we redirect you. (Or click <a href='setup.html' class='link'>here</a>)";
                window.location.href = "setup.html";
            }
            else if (verified === "23505") {
                title.innerHTML = "Your e-mail is already verified.";
                msg.innerHTML = "Please wait while we redirect you. (Or click <a href='setup.html' class='link'>here</a>)";
                window.location.href = "setup.html";
            }
            else {
                title.innerHTML = "An error occured.";
                msg.innerHTML = "Please try again. Error code:" + verified;
            }
        });

    </script>
    <style>
        @media(max-width:800px) {
            main {
                min-height: calc(100vh - 43vw);
            }
        }
    </style>
    <main class="landing">
        <h1 id="verif">Verifying your e-mail...</h1>
        <h3 id="verifmsg">This will only take a moment.</h3>
    </main>
    <script>initFooter();</script>
</body>
</html>